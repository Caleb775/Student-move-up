<% content_for :title, "Student Rankings - Student Records Management System" %>

<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="display-4 text-primary">Student Rankings</h1>
        <%= link_to 'Add New Student', new_student_path, class: "btn btn-primary btn-lg" %>
      </div>

      <% if @students.any? %>
        <div class="card shadow">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped table-hover">
                <thead class="table-dark">
                  <tr>
                    <th scope="col">Rank</th>
                    <th scope="col">Name</th>
                    <th scope="col">Reading</th>
                    <th scope="col">Writing</th>
                    <th scope="col">Listening</th>
                    <th scope="col">Speaking</th>
                    <th scope="col">Total</th>
                    <th scope="col">Percentage</th>
                    <th scope="col">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <% @students.each_with_index do |student, index| %>
                    <tr>
                      <td>
                        <span class="badge bg-<%= index < 3 ? 'warning' : 'secondary' %>">
                          #<%= index + 1 %>
                        </span>
                      </td>
                      <td><strong><%= student.name %></strong></td>
                      <td><span class="badge bg-info"><%= student.reading %></span></td>
                      <td><span class="badge bg-info"><%= student.writing %></span></td>
                      <td><span class="badge bg-info"><%= student.listening %></span></td>
                      <td><span class="badge bg-info"><%= student.speaking %></span></td>
                      <td><strong><%= student.total_score %></strong></td>
                      <td>
                        <span class="badge bg-<%= student.percentage >= 80 ? 'success' : student.percentage >= 60 ? 'warning' : 'danger' %>">
                          <%= student.percentage.round(2) %>%
                        </span>
                      </td>
                      <td>
                        <div class="btn-group" role="group">
                          <%= link_to 'Show', student_path(student), class: "btn btn-outline-primary btn-sm" %>
                          <%= link_to 'Edit', edit_student_path(student), class: "btn btn-outline-warning btn-sm" %>
                          <%= link_to 'Delete', student_path(student), 
                              data: { "turbo-method": "delete", confirm: 'Are you sure?' }, 
                              class: "btn btn-outline-danger btn-sm" %>
                        </div>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      <% else %>
        <div class="card">
          <div class="card-body text-center py-5">
            <h3 class="text-muted">No students yet</h3>
            <p class="text-muted">Get started by adding your first student!</p>
            <%= link_to 'Add a student', new_student_path, class: "btn btn-primary btn-lg" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
