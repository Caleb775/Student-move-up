<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="display-4 text-primary">
      <i class="bi bi-upload me-3"></i>
      Import Data
    </h1>
    <div class="text-muted">
      <i class="bi bi-calendar3 me-1"></i>
      <%= Date.current.strftime("%B %d, %Y") %>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-8">
      <!-- Import Form -->
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">
            <i class="bi bi-cloud-upload me-2"></i>
            Import Students
          </h5>
        </div>
        <div class="card-body">
          <%= form_with url: import_upload_path, multipart: true, local: true, class: "needs-validation", novalidate: true do |form| %>
            <div class="mb-3">
              <%= form.label :import_type, "Import Type", class: "form-label fw-bold" %>
              <%= form.select :import_type, [['Students', 'students']], {}, { class: "form-select", required: true } %>
            </div>
            
            <div class="mb-3">
              <%= form.label :file, "Select File", class: "form-label fw-bold" %>
              <%= form.file_field :file, class: "form-control", accept: ".csv,.xlsx,.xls", required: true %>
              <div class="form-text">
                Supported formats: CSV, Excel (.xlsx, .xls). Maximum file size: 10MB
              </div>
            </div>
            
            <div class="d-grid">
              <%= form.submit "Import Data", class: "btn btn-primary btn-lg" %>
            </div>
          <% end %>
        </div>
      </div>
      
      <!-- Import Instructions -->
      <div class="card shadow mt-4">
        <div class="card-header bg-light">
          <h6 class="mb-0">
            <i class="bi bi-info-circle me-2"></i>
            Import Instructions
          </h6>
        </div>
        <div class="card-body">
          <ol>
            <li class="mb-2">
              <strong>Download a template</strong> using the buttons below to see the correct format
            </li>
            <li class="mb-2">
              <strong>Fill in your data</strong> following the template structure
            </li>
            <li class="mb-2">
              <strong>Save your file</strong> as CSV or Excel format
            </li>
            <li class="mb-2">
              <strong>Upload the file</strong> using the form above
            </li>
            <li class="mb-0">
              <strong>Review results</strong> - you'll see a summary of imported records and any errors
            </li>
          </ol>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <!-- Template Downloads -->
      <div class="card shadow mb-3">
        <div class="card-header bg-success text-white">
          <h6 class="mb-0">
            <i class="bi bi-download me-2"></i>
            Download Templates
          </h6>
        </div>
        <div class="card-body">
          <h6 class="text-success mb-3">Students Template</h6>
          <div class="d-grid gap-2">
            <%= link_to import_template_path(type: 'students', format: 'csv'), class: "btn btn-outline-success" do %>
              <i class="bi bi-filetype-csv me-2"></i>
              CSV Template
            <% end %>
            <%= link_to import_template_path(type: 'students', format: 'xlsx'), class: "btn btn-outline-success" do %>
              <i class="bi bi-file-earmark-excel me-2"></i>
              Excel Template
            <% end %>
          </div>
        </div>
      </div>
      
      <!-- Data Requirements -->
      <div class="card shadow mb-3">
        <div class="card-header bg-light">
          <h6 class="mb-0">
            <i class="bi bi-list-check me-2"></i>
            Data Requirements
          </h6>
        </div>
        <div class="card-body">
          <h6 class="text-primary mb-2">Required Fields:</h6>
          <ul class="list-unstyled mb-3">
            <li><i class="bi bi-check text-success me-2"></i>Name (Student full name)</li>
            <li><i class="bi bi-check text-success me-2"></i>Reading (Score 0-10)</li>
            <li><i class="bi bi-check text-success me-2"></i>Writing (Score 0-10)</li>
            <li><i class="bi bi-check text-success me-2"></i>Listening (Score 0-10)</li>
            <li><i class="bi bi-check text-success me-2"></i>Speaking (Score 0-10)</li>
          </ul>
          
          <h6 class="text-info mb-2">Optional Fields:</h6>
          <ul class="list-unstyled mb-0">
            <li><i class="bi bi-info-circle text-info me-2"></i>Teacher Email (Assign to specific teacher)</li>
          </ul>
        </div>
      </div>
      
      <!-- Import Tips -->
      <div class="card shadow">
        <div class="card-header bg-light">
          <h6 class="mb-0">
            <i class="bi bi-lightbulb me-2"></i>
            Import Tips
          </h6>
        </div>
        <div class="card-body">
          <ul class="list-unstyled mb-0">
            <li class="mb-2">
              <i class="bi bi-exclamation-triangle text-warning me-2"></i>
              <small>Always download and use the template to ensure correct format</small>
            </li>
            <li class="mb-2">
              <i class="bi bi-exclamation-triangle text-warning me-2"></i>
              <small>Teacher emails must match existing teacher accounts</small>
            </li>
            <li class="mb-2">
              <i class="bi bi-exclamation-triangle text-warning me-2"></i>
              <small>All scores must be between 0 and 10</small>
            </li>
            <li class="mb-0">
              <i class="bi bi-exclamation-triangle text-warning me-2"></i>
              <small>Duplicate names will create separate student records</small>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
